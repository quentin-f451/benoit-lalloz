<section class="grid grid--{{ include.type }}">

    {% if include.type == 'collections' %}
        {% assign columns = 3 %}
    {% elsif include.type == 'spaces' %}
        {% assign columns = 2 %}
    {% else %}
        {% assign columns = 1 %}
    {% endif %}

    {% if include.filter == nil %}
        {% assign posts = site.posts | where: "categories", include.type %}
    {% else %}
        {% assign posts = site.posts | where: "categories", include.type | where: "filter", include.filter %}
    {% endif %}

    {% for post in posts %}

        {% assign category = post.categories[0] | strip %}  

        {% assign counter = forloop.index | modulo: columns %}
        {% if counter == 1 or columns == 1 %}<div class="grid__row">{% endif %}
            
            {% include grid_row.liquid category=false %}

        {% if forloop.last or counter == 0 %}</div>{% endif %}
    {% endfor %}

</section>